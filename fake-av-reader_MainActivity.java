package com.example.androiddefender2;

import android.app.LocalActivityManager;
import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.widget.ImageView;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import designer.TabsOperation;
import java.util.ArrayList;
import system.AppSingleton;

public class MainActivity
  extends TabActivity
{
  public void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    setContentView(2130903043);
    AppSingleton.getInstance().history.clear();
    ImageView localImageView = (ImageView)findViewById(2131296291);
    if (!AppSingleton.getInstance().activaten)
    {
      localImageView.setImageResource(2130837536);
      DefenderApplication.getInstance().tabHost = getTabHost();
      TabsOperation localTabsOperation = new TabsOperation();
      DefenderApplication.getInstance().tabHost.addTab(localTabsOperation.generateTabSpec("Home", this, HomeActivity.class, DefenderApplication.getInstance().tabHost, 2130837539));
      DefenderApplication.getInstance().tabHost.addTab(localTabsOperation.generateTabSpec("Update", this, UpdateActivity.class, DefenderApplication.getInstance().tabHost, 2130837545));
      DefenderApplication.getInstance().tabHost.addTab(localTabsOperation.generateTabSpec("Settings", this, SettingsActivity.class, DefenderApplication.getInstance().tabHost, 2130837543));
      DefenderApplication.getInstance().tabHost.addTab(localTabsOperation.generateTabSpec("Privacy", this, PrivacyActivity.class, DefenderApplication.getInstance().tabHost, 2130837542));
      DefenderApplication.getInstance().tabHost.addTab(localTabsOperation.generateTabSpec("Support", this, SupportActivity.class, DefenderApplication.getInstance().tabHost, 2130837544));
      String str = getLocalActivityManager().getCurrentId();
      if (str.equals("")) {
        str = "Home";
      }
      AppSingleton.getInstance().history.add(str);
      DefenderApplication.getInstance().tabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener()
      {
        public void onTabChanged(String paramAnonymousString)
        {
          if (paramAnonymousString.equals("Home")) {
            HomeActivity.self.onCreate(null);
          }
          for (;;)
          {
            String str = MainActivity.this.getLocalActivityManager().getCurrentId();
            AppSingleton.getInstance().history.add(str);
            return;
            if (paramAnonymousString.equals("Update")) {
              UpdateActivity.self.onCreate(null);
            } else if (paramAnonymousString.equals("Settings")) {
              SettingsActivity.self.onCreate(null);
            } else if (paramAnonymousString.equals("Privacy")) {
              PrivacyActivity.self.onCreate(null);
            } else if (paramAnonymousString.equals("Support")) {
              SupportActivity.self.onCreate(null);
            }
          }
        }
      });
      if (!getIntent().getBooleanExtra("byAppDolbal", false)) {
        break label323;
      }
      DefenderApplication.getInstance().tabHost.setCurrentTab(4);
    }
    for (;;)
    {
      if (!DefenderApplication.getInstance().makeFirstScan)
      {
        Intent localIntent = new Intent(this, SingleScanActivity.class);
        localIntent.putExtra("scanApplication", true);
        localIntent.putExtra("scanSDCard", false);
        startActivity(localIntent);
      }
      return;
      localImageView.setImageResource(2130837535);
      break;
      label323:
      DefenderApplication.getInstance().tabHost.setCurrentTab(0);
    }
  }
  
  public boolean onCreateOptionsMenu(Menu paramMenu)
  {
    getMenuInflater().inflate(2131230722, paramMenu);
    return true;
  }
  
  public void onRestoreInstanceState(Bundle paramBundle)
  {
    super.onRestoreInstanceState(paramBundle);
    int i = paramBundle.getInt("CurrentTab", 0);
    DefenderApplication.getInstance().tabHost.setCurrentTab(i);
    if (paramBundle.getString("CurrentActivity").equals("StartScan")) {}
  }
  
  protected void onResume()
  {
    getIntent().getBooleanExtra("byAppDolbal", false);
    super.onResume();
  }
  
  public void onSaveInstanceState(Bundle paramBundle)
  {
    super.onSaveInstanceState(paramBundle);
    paramBundle.putInt("CurrentTab", DefenderApplication.getInstance().tabHost.getCurrentTab());
    int i = -1 + AppSingleton.getInstance().history.size();
    paramBundle.putString("CurrentActivity", (String)AppSingleton.getInstance().history.get(i));
  }
}
